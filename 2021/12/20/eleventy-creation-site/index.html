<!doctype html>
<html lang="fr-FR">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Création de mon site Eleventy - blog.pagesd.info</title>
    <link rel="shortcut icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="alternate" href="/atom.xml" title="blog.pagesd.info" type="application/atom+xml">
    <meta name="author" content="Michel" />
<link rel="canonical" href="https://blog.pagesd.info/2021/12/20/eleventy-creation-site/" />
<meta property="og:title" content="Création de mon site Eleventy" />
<meta name="description" content="Pour migrer mon ancien blogue de Jekyll vers Eleventy, j&#39;ai commencé de façon classique en suivant les instructions disponibles un peu partout, en particulier la page Getting started sur le site d&#39;Eleventy." />
<meta property="og:description" content="Pour migrer mon ancien blogue de Jekyll vers Eleventy, j&#39;ai commencé de façon classique en suivant les instructions disponibles un peu partout, en particulier la page Getting started sur le site d&#39;Eleventy." />
<meta property="og:locale" content="fr-FR" />
<meta property="og:url" content="https://blog.pagesd.info/2021/12/20/eleventy-creation-site/" />
<meta property="og:site_name" content="blog.pagesd.info" />
<meta property="og:type" content="article" />
<meta property="og:image" content="https://blog.pagesd.info/public/2021/tour-eiffel.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="article:published_time" content="2021-12-20T12:29:43.000Z" />
<script type="application/ld+json">{"headline":"blog.pagesd.info","dateModified":"2021-12-20T12:29:43.000Z","datePublished":"2021-12-20T12:29:43.000Z","description":"Pour migrer mon ancien blogue de Jekyll vers Eleventy, j'ai commencé de façon classique en suivant les instructions disponibles un peu partout, en particulier la page Getting started sur le site d'Eleventy.","inLanguage":"fr-FR","url":"https://blog.pagesd.info/2021/12/20/eleventy-creation-site/","@type":"BlogPosting","image":"https://blog.pagesd.info/public/2021/tour-eiffel.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.pagesd.info/2021/12/20/eleventy-creation-site/"},"author":{"@type":"Person","name":"Michel"},"@context":"https://schema.org"}</script>
  </head>

  <body><div class="container">

    <header><nav>
      <a class="title" href="/">blog.pagesd.info</a>
      // <a href="/archives/">archives</a>
      // <a href="/traductions/">traductions</a>
    </nav></header>



<article>

<figure class="cover-image"><img src="/public/2021/tour-eiffel.jpg" alt="La naissance de la tour Eiffel" /><figcaption><a href="https://www.toureiffel.paris/fr/le-monument/histoire">La naissance de la tour Eiffel</a></figcaption></figure>

  <header>
    <h1>
      <a href="/2021/12/20/eleventy-creation-site/">Création de mon site Eleventy</a>
    </h1>
    <p>
      <span>2021-12-20</span>
      <span>#11ty</span>
    </p>
  </header>

  <div>

<p>Pour migrer mon ancien blogue de Jekyll vers Eleventy, j'ai commencé de façon classique en suivant les instructions disponibles un peu partout, en particulier la page <a href="https://www.11ty.dev/docs/getting-started/">Getting started</a> sur le site d'Eleventy.</p>
<pre><code>mkdir blog11
cd blog11
npm init -y
npm install --save-dev @11ty/eleventy
</code></pre>
<p>Puis sous VS Code, je modifie l'entrée &quot;scripts&quot; du fichier &quot;package.json&quot; pour pouvoir facilement lancer mon site par un simple <code>npm start</code>.</p>
<pre><code class="language-json">  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;npx @11ty/eleventy&quot;,
    &quot;start&quot;: &quot;npx @11ty/eleventy --serve&quot;
  },
</code></pre>
<p>Comme je vais utiliser <a href="https://git-scm.com/">Git</a>, je crée un fichier &quot;.gitignore&quot; pour indiquer les éléments que Git ne doit pas gérer.</p>
<pre><code>node_modules/
package-lock.json
_site/
</code></pre>
<p><em>Note : Pour l'instant, j'exclus les classiques &quot;node_modules/&quot; et &quot;package-lock.json&quot; comme dans tous mes projets Node JS. J'y ajoute le dossier &quot;_site/&quot; où Eleventy génèrera le contenu du site.</em></p>
<p>Par défaut, Eleventy ne gère pas les fichiers référencés dans le fichier &quot;.gitignore&quot;. Mais il est également possible d'exclure d'autres fichiers spécifiquement pour Eleventy en utilisant un fichier &quot;.eleventyignore&quot;.</p>
<pre><code>README.md
</code></pre>
<p>Pour entrer dans le vif du sujet, j'ajoute le fichier &quot;.eleventy.js&quot; pour configurer Eleventy. Ce fichier sert à regrouper tout ce qui permet de configurer Eleventy, y compris pour remplacer certains trucs qui sinon devraient être gérés au niveau de la ligne de commande.</p>
<p>Dans mon cas, je copie le contenu proposé par Sia Karamalegos dans son tutoriel <a href="https://sia.codes/posts/itsiest-bitsiest-eleventy-tutorial/">Itsiest, Bitsiest Eleventy Tutorial</a> qui reprend uniquement les valeurs par défaut employées par Eleventy. Mais je trouve plus clair de savoir à quoi m'attendre.</p>
<pre><code class="language-js">module.exports = function(eleventyConfig) {
  // Set custom directories for input, output, includes, and data
  return {
    dir: {
      input: &quot;src&quot;,
      includes: &quot;_includes&quot;,
      data: &quot;_data&quot;,
      output: &quot;_site&quot;
    }
  };
};
</code></pre>
<p>La ligne <code>input: &quot;src&quot;</code> indique que les fichiers sources du site sont stockés dans le répertoire &quot;src&quot;. Je crée donc ce répertoire.</p>
<pre><code>mkdir src
</code></pre>
<p><em>Note : Avec <code>input: &quot;src&quot;</code> j'indique à Eleventy qu'il doit traiter les fichiers du dossier &quot;src&quot; et de ses sous-répertoires. Par conséquent, je n'ai pas vraiment besoin d'exclure le fichier &quot;README.md&quot; via le fichier &quot;.eleventyignore&quot;, puisqu'il est présent au niveau au dessus du répertoire &quot;src&quot;.</em></p>
<p>La ligne <code>includes: &quot;_includes&quot;</code> indique que la charte graphique sera stockée dans le répertoire &quot;_includes&quot; du dossier &quot;src&quot;. De même, la ligne <code>data: &quot;_data&quot;</code> indique que le paramétrage global du site est enregistré dans le répertoire &quot;_data&quot; du dossier &quot;src&quot;. Je crée donc ces 2 répertoires à l'intérieur du répertoire &quot;src&quot;.</p>
<pre><code>cd src
mkdir _includes
mkdir _data
</code></pre>
<p>Pour tester que ça marche, je crée enfin un premier fichier &quot;index.md&quot; dans le répertoire &quot;src&quot; avec un peu de contenu.</p>
<pre><code class="language-markdown"># Mon nouveau Blogue

C'est parti pour la migration de Jekyll vers Eleventy.

Jusqu'ici tout va bien...
</code></pre>
<p>Puis je &quot;compile&quot; :</p>
<pre><code>npm start
</code></pre>
<p>Ce qui donne :</p>
<pre><code>&gt; blog11@1.0.0 start
&gt; npx @11ty/eleventy --serve

Writing _site/index.html from ./src/index.md.
Wrote 1 file in 0.21 seconds (v0.12.1)
Watching…
[Browsersync] Access URLs:
 ---------------------------------------
       Local: http://localhost:8080
    External: http://192.168.42.236:8080
 ---------------------------------------
          UI: http://localhost:3001
 UI External: http://localhost:3001
 ---------------------------------------
[Browsersync] Serving files from: _site
</code></pre>
<p>Déjà il n'y a pas d'erreur ! Et je peux aller voir le site généré sur <a href="http://localhost:8080">http://localhost:8080</a>.</p>
<p><img src="/public/2021/eleventy-001.jpg" alt=""></p>
<p>C'est bien. Mais si j'affiche le code source de cette page, je peux constater que ce n'est pas un contenu HTML complet. On n'y retrouve que les 3 lignes du fichier source transformées en HTML.</p>
<pre><code class="language-html">&lt;h1&gt;Mon nouveau Blogue&lt;/h1&gt;
&lt;p&gt;C'est parti pour la migration de Jekyll vers Eleventy.&lt;/p&gt;
&lt;p&gt;Jusqu'ici tout va bien...&lt;/p&gt;
</code></pre>
<div class="pub"><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5475403929650645"
     data-ad-slot="8049019520"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></div>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
<p>Je vais donc devoir ajouter un &quot;layout&quot; pour que Eleventy ait un &quot;cadre&quot; où insérer le HTML qu'il génère à partir des fichiers Markdown. Pour cela, je crée un fichier &quot;layout.njk&quot; dans le sous-répertoire &quot;src/_includes&quot;.</p>
<pre><code class="language-njk">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;fr-FR&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Mon nouveau blogue&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Le contenu généré par Eleventy sera ajouté là --&gt;
  {{ content | safe }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Puis il faut que j'indique à Eleventy d'utiliser ce layout lorsqu'il génère le contenu du site. Pour cela, j'ajoute un &quot;front matter&quot; au tout début du fichier &quot;index.md&quot; qui devient alors :</p>
<pre><code class="language-markdown">---
layout: layout.njk
---
# Mon nouveau Blogue

C'est parti pour la migration de Jekyll vers Eleventy.

Jusqu'ici tout va bien...
</code></pre>
<p>Lorsque je sauvegarde le fichier, le site est recompilé automatiquement, car la commande &quot;npm start&quot; (qui a lancé la commande <code>npx @11ty/eleventy --serve</code>) est toujours en cours dans le terminal de VS Code.</p>
<pre><code>File changed: src\index.md
Writing _site/index.html from ./src/index.md.
Wrote 1 file in 0.07 seconds (v0.12.1)
Watching…
[Browsersync] Reloading Browsers...
</code></pre>
<p>Et le contenu du navigateur est lui aussi automatiquement rafraichi (grâce à <a href="https://browsersync.io/">Browsersync</a> qui est utilisé par Eleventy).</p>
<p><img src="/public/2021/eleventy-002.jpg" alt=""></p>
<p>Rien qu'au titre de l'onglet qui est passé de &quot;localhost:8080&quot; à &quot;Mon nouveau blogue&quot;, je peux voir que Eleventy a bien pris en compte le nouveau layout. Mais ça ne coûte qu'un clic-droit de vérifier en affichant le code source de la page.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;fr-FR&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Mon nouveau blogue&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;&lt;script id=&quot;__bs_script__&quot;&gt;//&lt;![CDATA[
    document.write(&quot;&lt;script async src='/browser-sync/browser-sync-client.js?v=2.27.7'&gt;&lt;\/script&gt;&quot;.replace(&quot;HOST&quot;, location.hostname));
//]]&gt;&lt;/script&gt;

  &lt;!-- Le contenu généré par Eleventy sera ajouté là --&gt;
  &lt;h1&gt;Mon nouveau Blogue&lt;/h1&gt;
&lt;p&gt;C'est parti pour la migration de Jekyll vers Eleventy.&lt;/p&gt;
&lt;p&gt;Jusqu'ici tout va bien...&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>C'est pas mal !</p>
<p>Mais comme on peut le voir, le titre de mon nouveau blogue apparait 2 fois : une première dans la balise <code>&lt;title&gt;</code> et une seconde dans la balise <code>&lt;h1&gt;</code>. Ce qui est assez normal. Ce qui est moins amusant, c'est que pour cela j'ai dû le répéter dans 2 fichiers différents :</p>
<ul>
<li>dans &quot;layout.njk&quot; pour qu'il apparaisse dans la balise <code>&lt;title&gt;</code></li>
<li>dans &quot;index.md&quot; pour qu'il s'affiche dans le titre <code>&lt;h1&gt;</code></li>
</ul>
<p>Et qu'en plus je n'ai même pas été foutu de l'écrire de la même façon à chaque fois :)</p>
<p>C'est là que le dossier &quot;src/_data&quot; va servir. Je vais créer un fichier &quot;site.json&quot; pour y renseigner tous les informations globales du site. Ça correspond au fichier &quot;_config.yml&quot; de Jekyll.</p>
<pre><code class="language-json">{
    &quot;title&quot;: &quot;Mon nouveau Blogue&quot;,
    &quot;url&quot;: &quot;https://mon.nouveau.blog&quot;,
    &quot;lang&quot;: &quot;fr-FR&quot;,
    &quot;description&quot;: &quot;Mon blog, de 2004 à aujourd'hui...&quot;,
    &quot;author&quot;: &quot;Michel&quot;
}
</code></pre>
<p>J'en ai mis un peu plus...</p>
<p>Maintenant, je peux mettre à jour le layout pour y utiliser les variables globales &quot;site.lang&quot; et &quot;site.title&quot;.</p>
<pre><code class="language-njk">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;{{ site.lang }}&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;{{ site.title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Le contenu généré par Eleventy sera ajouté là --&gt;
  {{ content | safe }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Et aussi le fichier &quot;index.md&quot; pour y utiliser la variable globale &quot;site.title&quot;.</p>
<pre><code class="language-markdown">---
layout: layout.njk
---
# {{ site.title }}

C'est parti pour la migration de Jekyll vers Eleventy.

Jusqu'ici tout va bien...
</code></pre>
<p>Je retourne sur le navigateur et je peux constater que maintenant c'est bien &quot;Mon nouveau Blogue&quot; partout.</p>
<p>Un dernier truc pour aujourd'hui. Comme le site va contenir plusieurs pages et des tas de billets, je vais avoir besoin de définir un titre pour chaque page en plus du titre général du site.</p>
<p>Pour donner un titre à la page, j'ajoute la variable &quot;title&quot; dans le front matter du fichier &quot;index.md&quot; et je remplace l'utilisation de la variable globale &quot;site.title&quot; par celle de cette nouvelle variable.</p>
<pre><code class="language-markdown">---
layout: layout.njk
title: Accueil
---
# {{ title }}

C'est parti pour la migration de Jekyll vers Eleventy.

Jusqu'ici tout va bien...
</code></pre>
<p>Puis j'ajoute le titre de la page dans &quot;layout.njk&quot; , pour que l'utilisateur sache sur quelle page il est en plus d'avoir le titre du blogue.</p>
<pre><code class="language-njk">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;{{ site.lang }}&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;{{ title }} - {{ site.title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Le contenu généré par Eleventy sera ajouté là --&gt;
  {{ content | safe }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Ce qui donne :</p>
<p><img src="/public/2021/eleventy-003.jpg" alt=""></p>
<p>Ctrl+C dans le terminal de VS Code pour arrêter la tâche &quot;npm start&quot; et c'est bon pour aujourd'hui.</p>
<p>Ou alors juste :</p>
<pre><code>c:\code\blog11&gt; git init -b main
c:\code\blog11&gt; git add .
c:\code\blog11&gt; git commit -m &quot;Création du blog.&quot;
</code></pre>


  </div>

</article><nav class="paginate">
  <a rel="prev" href="/2021/12/11/create-badge-avatar-css/" hreflang="en-US">How to create a badge / avatar in CSS</a>
  <a rel="next" href="/2021/12/21/highlight-problems-dev-to/" hreflang="en-US">Two highlight problems on dev.to</a>
</nav>



<div class="pub"><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5475403929650645"
     data-ad-slot="8049019520"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></div>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>


    <footer>
      <a href="/">blog.pagesd.info</a> //
      <a href="https://www.solitaire-play.com/">www.solitaire-play.com</a>
    </footer>

  </div>
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5475403929650645"
     crossorigin="anonymous"></script>
  </body>

</html>
